# 快速开始指南

## 运行前端和后端

### 1️⃣ 启动后端服务

```powershell
# 进入后端目录
cd f:\Exploration\MetroPlan\backend

# 运行Flask应用
python app.py
```

等待输出：`Running on http://127.0.0.1:5000`

### 2️⃣ 启动前端开发服务

**在新的终端中：**

```powershell
# 进入前端目录
cd f:\Exploration\MetroPlan\metroplan

# 首次使用需要安装依赖
yarn install
# 或者
npm install

# 启动开发服务器
yarn serve
# 或者
npm run serve
```

等待输出显示本地访问地址（通常是 `http://localhost:8080`）

### 3️⃣ 打开浏览器

在浏览器中访问应用地址，你会看到：

```
┌─────────────────────────────────────┐
│  MetroPlan - 城际铁路规划查询      │
├─────────────────────────────────────┤
│  起点站   [输入框]  ✕              │
│  终点站   [输入框]  ✕              │
│  [查询路径]   [获取车站列表]      │
├─────────────────────────────────────┤
│  请输入起点站和终点站查询...         │
└─────────────────────────────────────┘
```

## 使用示例

### 查询路径

1. **在"起点站"输入框输入**：`广州南`
2. **在"终点站"输入框输入**：`深圳北`
3. **点击"查询路径"按钮**
4. 等待结果显示，你会看到：

```
查询结果 (共5条路径)
┌──────────────────────────────────────┐
│ 🟢 直达    07:00 → 07:29   [0h 29m] │
│                                      │
│ 列车序列: C7711                      │
│ 总耗时: 29分钟                      │
│ 换乘次数: 0次                       │
│ 🔵 包含快速列车                    │
└──────────────────────────────────────┘
```

### 查看可用车站

点击"获取车站列表"按钮，会显示所有65个可用车站，例如：

```
可用车站 (共65个)
[广州南] [广州东] [肇庆] [珠海] [深圳北] ...
```

## 功能演示

### ✨ 主要功能

| 功能 | 说明 |
|------|------|
| **起点站输入** | 输入出发地名称，支持清空 |
| **终点站输入** | 输入目的地名称，支持清空 |
| **查询路径** | 查询两站间的所有可行路线 |
| **路径展示** | 显示直达/换乘、时间、耗时等信息 |
| **换乘详情** | 展示换乘站、等待时间等 |
| **车站列表** | 查看所有可用车站 |

### 🎯 路径信息说明

每条路径包含：

- **类型标签**：`直达`（绿色）或 `换乘`（黄色）
- **时间段**：`出发时间 → 到达时间`
- **耗时**：`总时长` + `分钟数`
- **列车序列**：使用的列车车次（例：C7711 → C7045）
- **换乘次数**：需要换乘多少次
- **快速列车标记**：如果包含快速列车会显示标签
- **换乘详情**：在哪个站换乘、等待时间等

## 常见问题排查

### ❌ 报错：网络错误，请检查API是否运行

**原因**：后端API没有启动

**解决**：
```powershell
# 检查后端是否运行
python app.py
```

### ❌ 报错：未找到路径

**原因**：输入的车站名称不存在

**解决**：
1. 点击"获取车站列表"查看有效车站
2. 使用确切的车站名称重试

### ❌ 样式显示不正常

**原因**：uview样式未正确加载

**解决**：
1. 确保已执行 `yarn install`
2. 重启前端开发服务器

### ❌ 端口被占用

**原因**：前端端口（8080）或后端端口（5000）被其他应用占用

**解决**：
```powershell
# 查找占用端口5000的进程
netstat -ano | findstr :5000
# 杀死进程（替换PID）
taskkill /PID <PID> /F
```

## 代码位置

### 前端代码
- **主页面**：`metroplan/src/pages/index/index.vue`
- **应用入口**：`metroplan/src/App.vue`
- **配置文件**：`metroplan/package.json`

### 后端代码
- **主程序**：`backend/app.py`
- **API数据**：`backend/*.json`（车站表、时刻表等）

## 配置修改

### 修改API地址

如果后端运行在其他地址，编辑 `metroplan/src/pages/index/index.vue`：

```javascript
// 找到这一行（大约第10-15行）
apiBaseUrl: 'http://localhost:5000'

// 改为实际地址，例如：
apiBaseUrl: 'http://192.168.1.100:5000'
```

### 修改最大换乘次数

在 `index.vue` 的 `queryPath()` 方法中：

```javascript
data: {
  start_station: this.startStation,
  end_station: this.endStation,
  max_transfers: 2  // 改为需要的值（0、1、2）
}
```

## 下一步

想要进一步扩展功能？可以考虑：

- 📝 添加结果筛选（按时间、耗时等）
- 💾 保存常用的出发地和目的地
- 📍 集成地图显示路线
- 🔔 添加提醒功能
- 📊 显示列车信息统计

更多详情见 `/.docs/Frontend-Implementation.md`

---

**提示**：确保后端服务和前端开发服务都在运行！🚀
