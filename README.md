# MetroPlan - å¹¿ä¸œåŸé™…è½¨é“äº¤é€šè·¯å¾„è§„åˆ’ç³»ç»Ÿ

<div align="center">

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/Node.js-14.0+-green.svg)](https://nodejs.org/)
[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![Vue.js](https://img.shields.io/badge/Vue.js-2.x-brightgreen.svg)](https://vuejs.org/)

ä¸€ä¸ªç»¼åˆæ€§çš„åŸé™…è½¨é“äº¤é€šè§„åˆ’ç³»ç»Ÿï¼Œæä¾›å¹¿ä¸œçœåŒºåŸŸå†…çš„åˆ—è½¦è·¯å¾„æŸ¥è¯¢æœåŠ¡ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„) â€¢ [ä½¿ç”¨æ–‡æ¡£](#ä½¿ç”¨æ–‡æ¡£) â€¢ [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
  - [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
  - [åç«¯éƒ¨ç½²](#åç«¯éƒ¨ç½²)
  - [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½²)
  - [æ•°æ®å¤„ç†å·¥å…·](#æ•°æ®å¤„ç†å·¥å…·)
- [ä½¿ç”¨æ–‡æ¡£](#ä½¿ç”¨æ–‡æ¡£)
  - [API æ¥å£](#api-æ¥å£)
  - [å‰ç«¯ä½¿ç”¨](#å‰ç«¯ä½¿ç”¨)
- [å®ç°åŸç†](#å®ç°åŸç†)
  - [æ ¸å¿ƒç®—æ³•](#æ ¸å¿ƒç®—æ³•)
  - [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
  - [è·¯å¾„ä¼˜åŒ–](#è·¯å¾„ä¼˜åŒ–)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## é¡¹ç›®æ¦‚è¿°

**MetroPlan** æ˜¯ä¸€ä¸ªä¸“ä¸ºå¹¿ä¸œçœåŸé™…è½¨é“äº¤é€šè®¾è®¡çš„æ™ºèƒ½è·¯å¾„è§„åˆ’ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºä¹˜å®¢æä¾›æœ€ä¼˜çš„å‡ºè¡Œæ–¹æ¡ˆã€‚ç³»ç»Ÿæ”¯æŒ **65 ä¸ªè½¦ç«™**ã€**242 è¾†åˆ—è½¦**çš„å®æ—¶æŸ¥è¯¢ï¼Œèƒ½å¤Ÿåœ¨è€ƒè™‘æ¢ä¹˜æ¬¡æ•°ã€æ—¶é—´çª—å£ç­‰çº¦æŸæ¡ä»¶ä¸‹ï¼Œå¿«é€Ÿè®¡ç®—å‡ºæœ€ä¼˜çš„å‡ºè¡Œè·¯å¾„ã€‚

### é¡¹ç›®ç›®æ ‡

1. **æ™ºèƒ½è·¯å¾„è§„åˆ’**ï¼šåŸºäºæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç®—æ³•ï¼Œå¿«é€Ÿæ‰¾å‡ºèµ·ç‚¹åˆ°ç»ˆç‚¹çš„æ‰€æœ‰å¯è¡Œè·¯å¾„
2. **å¤šæ–¹æ¡ˆå¯¹æ¯”**ï¼šè‡ªåŠ¨åˆå¹¶ç›¸åŒè½¦æ¬¡åºåˆ—çš„è·¯å¾„ï¼Œæä¾›å¤šç§æ¢ä¹˜æ–¹æ¡ˆä¾›ç”¨æˆ·é€‰æ‹©
3. **æ—¶é—´ä¼˜åŒ–**ï¼šæ ¹æ®åˆ—è½¦æ—¶åˆ»è¡¨è®¡ç®—ç²¾ç¡®çš„å‡ºå‘/åˆ°è¾¾æ—¶é—´å’Œæ€»è€—æ—¶
4. **ç”¨æˆ·å‹å¥½**ï¼šæä¾›ç›´è§‚çš„ Web ç•Œé¢ï¼Œæ”¯æŒå®æ—¶æŸ¥è¯¢å’Œç»“æœå±•ç¤º
5. **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ·»åŠ æ–°çš„è½¦ç«™ã€çº¿è·¯å’Œç®—æ³•ä¼˜åŒ–

### åº”ç”¨åœºæ™¯

- ğŸš„ åŸé™…å‡ºè¡Œè§„åˆ’ï¼ˆå¦‚å¹¿å· â†’ æ·±åœ³ã€ä½›å±± â†’ è‚‡åº†ç­‰ï¼‰
- ğŸ”„ å¤šæ¬¡æ¢ä¹˜ä¼˜åŒ–ï¼ˆæœ€å¤šæ”¯æŒ 2 æ¬¡æ¢ä¹˜ï¼‰
- â±ï¸ æ—¶é—´çª—å£è¿‡æ»¤ï¼ˆåŸºäºæœ€å¿«è·¯çº¿è‡ªåŠ¨ç­›é€‰åˆç†æ–¹æ¡ˆï¼‰
- ğŸ“Š å¿«é€Ÿåˆ—è½¦è¯†åˆ«ï¼ˆæ ‡æ³¨åŸé™…å¿«é€Ÿåˆ—è½¦ï¼‰

### é¡µé¢å±•ç¤º

![H5ç«¯é¡µé¢å±•ç¤º](photo/WEB.png)



![å°ç¨‹åºé¡µé¢å±•ç¤º](photo/å°ç¨‹åº.png)

---

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•**ï¼šé«˜æ•ˆçš„è·¯å¾„æŸ¥æ‰¾ï¼Œæ”¯æŒ 0-2 æ¬¡æ¢ä¹˜
- âœ… **æ™ºèƒ½è·¯å¾„åˆå¹¶**ï¼šè‡ªåŠ¨åˆå¹¶ç›¸åŒè½¦æ¬¡åºåˆ—çš„è·¯å¾„æ–¹æ¡ˆ
- âœ… **æ—¶é—´çª—å£è¿‡æ»¤**ï¼šåŸºäºæœ€å¿«è·¯çº¿çš„æ—¶é—´çª—å£è¿‡æ»¤ï¼ˆå¯é…ç½®ï¼‰
- âœ… **æ–¹å‘æ€§éªŒè¯**ï¼šç¡®ä¿æ¢ä¹˜æ–¹æ¡ˆçš„æ–¹å‘æ€§ä¸€è‡´æ€§
- âœ… **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒä¸­æ–‡ç«™åå’Œè½¦æ¬¡ä¿¡æ¯
- âœ… **å¿«é€Ÿåˆ—è½¦æ ‡è¯†**ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶æ ‡æ³¨å¿«é€Ÿåˆ—è½¦

### å‰ç«¯ç‰¹æ€§

- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šç´«è‰²æ¸å˜ä¸»é¢˜ï¼Œå“åº”å¼è®¾è®¡
- ğŸ” **å®æ—¶æŸ¥è¯¢**ï¼šè¾“å…¥èµ·ç‚¹/ç»ˆç‚¹å³å¯å¿«é€ŸæŸ¥è¯¢
- ğŸ“± **è·¨å¹³å°æ”¯æŒ**ï¼šåŸºäº uni-appï¼Œæ”¯æŒ H5ã€å°ç¨‹åºã€APP ç­‰å¤šç«¯
- ğŸ’¡ **æ™ºèƒ½æç¤º**ï¼šè½¦ç«™åˆ—è¡¨æŸ¥çœ‹ï¼Œè¾“å…¥éªŒè¯
- ğŸ¯ **ç»“æœå¯è§†åŒ–**ï¼šè·¯å¾„ç±»å‹ã€è€—æ—¶ã€æ¢ä¹˜è¯¦æƒ…æ¸…æ™°å±•ç¤º

### åç«¯ç‰¹æ€§

- ğŸ”’ **å®‰å…¨é˜²æŠ¤**ï¼šHelmet å®‰å…¨å¤´ã€CORS é…ç½®ã€è¯·æ±‚é™æµ
- ğŸ“Š **æ—¥å¿—è®°å½•**ï¼šMorgan æ—¥å¿—ä¸­é—´ä»¶ï¼Œç”Ÿäº§/å¼€å‘ç¯å¢ƒåˆ†ç¦»
- âš™ï¸ **çµæ´»é…ç½®**ï¼šç¯å¢ƒå˜é‡ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²
- ğŸ§ª **æµ‹è¯•è¦†ç›–**ï¼šJest å•å…ƒæµ‹è¯•ï¼ŒAPI é›†æˆæµ‹è¯•
- ğŸ³ **å®¹å™¨åŒ–æ”¯æŒ**ï¼šDocker å’Œ Docker Compose é…ç½®

---

## æŠ€æœ¯æ ˆ

### åç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Node.js** | 14.0+ | è¿è¡Œæ—¶ç¯å¢ƒ |
| **Express.js** | 4.18.2 | Web æ¡†æ¶ |
| **Python** | 3.8+ | æ•°æ®å¤„ç†å’Œç®—æ³•å®ç° |
| **Flask** | Latest | Python API æœåŠ¡ï¼ˆå¯é€‰ï¼‰ |

**ä¸»è¦ä¾èµ–**ï¼š
- `express`: Web åº”ç”¨æ¡†æ¶
- `cors`: è·¨åŸŸèµ„æºå…±äº«
- `helmet`: å®‰å…¨é˜²æŠ¤
- `morgan`: æ—¥å¿—è®°å½•
- `dotenv`: ç¯å¢ƒå˜é‡ç®¡ç†
- `jest`: å•å…ƒæµ‹è¯•æ¡†æ¶

### å‰ç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **uni-app** | Latest | è·¨å¹³å°å¼€å‘æ¡†æ¶ |
| **Vue.js** | 2.x | å‰ç«¯æ¡†æ¶ |
| **uView UI** | 2.0.36 | UI ç»„ä»¶åº“ |
| **SCSS** | - | æ ·å¼é¢„å¤„ç†å™¨ |

### æ•°æ®å¤„ç†

- **Python 3.8+**ï¼šæ•°æ®å¤„ç†è„šæœ¬
- **JSON**ï¼šæ•°æ®å­˜å‚¨æ ¼å¼
- **Markdown**ï¼šè½¦æ¬¡ä¿¡æ¯æ–‡æ¡£

---

## é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      HTTP/REST API      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  åç«¯ API    â”‚
â”‚  (uni-app)  â”‚                          â”‚ (Express.js) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ DFS ç®—æ³•å¼•æ“ â”‚
                                         â”‚   (Python)   â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  æ•°æ®æ–‡ä»¶    â”‚
                                         â”‚   (JSON)     â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
MetroPlan/
â”œâ”€â”€ backend/                    # Node.js åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ config.js          # é…ç½®æ–‡ä»¶å’ŒéªŒè¯
â”‚   â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ errorHandler.js   # é”™è¯¯å¤„ç†
â”‚   â”‚   â””â”€â”€ validation.js     # è¯·æ±‚éªŒè¯
â”‚   â”œâ”€â”€ routes/                # è·¯ç”±å®šä¹‰
â”‚   â”‚   â””â”€â”€ pathfinding.js    # è·¯å¾„æŸ¥æ‰¾è·¯ç”±
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ dataService.js    # æ•°æ®åŠ è½½æœåŠ¡
â”‚   â”‚   â””â”€â”€ pathfindingService.js  # è·¯å¾„æŸ¥æ‰¾æœåŠ¡
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ timeUtils.js      # æ—¶é—´å¤„ç†å·¥å…·
â”‚   â”œâ”€â”€ test/                  # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â”œâ”€â”€ app.js                 # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ frontend/                   # uni-app å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index/         # é¦–é¡µï¼ˆæŸ¥è¯¢ç•Œé¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ static/            # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ App.vue            # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ public/                # å…¬å…±èµ„æº
â”‚   â””â”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ data/                       # æ•°æ®å¤„ç†å’Œç®—æ³•
â”‚   â”œâ”€â”€ DFS_PathFinding/       # DFS è·¯å¾„æŸ¥æ‰¾ç®—æ³•
â”‚   â”‚   â””â”€â”€ find_paths_dfs.py # æ ¸å¿ƒç®—æ³•å®ç°
â”‚   â”œâ”€â”€ data_processing/       # æ•°æ®å¤„ç†è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ md_to_json.py     # Markdown è½¬ JSON
â”‚   â”‚   â”œâ”€â”€ generate_service_list.py  # ç”ŸæˆæœåŠ¡åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ add_directionality.py     # æ·»åŠ æ–¹å‘æ€§ä¿¡æ¯
â”‚   â”œâ”€â”€ graph/                 # å›¾æ•°æ®ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ generate_fast_graph.py    # ç”Ÿæˆå¿«é€Ÿå›¾
â”‚   â”‚   â””â”€â”€ fast_graph.json           # å›¾æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ check/                 # æ•°æ®éªŒè¯è„šæœ¬
â”‚   â”œâ”€â”€ *.json                 # å„ç±»æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ app.py                 # Flask APIï¼ˆå¯é€‰ï¼‰
â”‚
â””â”€â”€ .docs/                      # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ API-Documentation.md            # API æ–‡æ¡£
    â”œâ”€â”€ Frontend-Implementation.md      # å‰ç«¯å®ç°è¯´æ˜
    â””â”€â”€ IMPLEMENTATION-SUMMARY.md       # å®ç°æ€»ç»“
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

#### å¿…éœ€ç¯å¢ƒ

- **Node.js** >= 14.0
- **npm** >= 6.0 æˆ– **yarn** >= 1.22
- **Python** >= 3.8ï¼ˆç”¨äºæ•°æ®å¤„ç†ï¼‰

#### å¯é€‰ç¯å¢ƒ

- **Docker** å’Œ **Docker Compose**ï¼ˆç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- **Git**ï¼ˆç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼‰

### åç«¯éƒ¨ç½²

#### 1. å®‰è£…ä¾èµ–

```powershell
cd backend
npm install
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶ç¼–è¾‘ï¼š

```powershell
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼ˆä½¿ç”¨è®°äº‹æœ¬æˆ– VS Codeï¼‰ï¼š

```env
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development          # ç¯å¢ƒæ¨¡å¼ï¼šdevelopment | production
PORT=3000                     # æœåŠ¡å™¨ç«¯å£

# æ•°æ®æ–‡ä»¶è·¯å¾„
GRAPH_FILE_PATH=./fast_graph.json                      # å›¾æ•°æ®æ–‡ä»¶
SCHEDULE_FILE_PATH=./schedule_with_directionality.json # æ—¶åˆ»è¡¨æ–‡ä»¶
RESULTS_DIR=./results                                  # ç»“æœè¾“å‡ºç›®å½•

# ç®—æ³•å‚æ•°
MAX_TRANSFERS=2                        # æœ€å¤§æ¢ä¹˜æ¬¡æ•°ï¼ˆ0-2ï¼‰
TIME_WINDOW_MINUTES=90                 # æ—¶é—´çª—å£ï¼ˆåˆ†é’Ÿï¼‰
ALLOW_SAME_STATION_TRANSFERS=false     # æ˜¯å¦å…è®¸åŒç«™è¿ç»­æ¢ä¹˜
```

#### 3. å¯åŠ¨æœåŠ¡å™¨

```powershell
# å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

æœåŠ¡å™¨å¯åŠ¨åè®¿é—®ï¼š`http://localhost:3000`

#### 4. éªŒè¯æœåŠ¡

```powershell
# ä½¿ç”¨ curl æµ‹è¯•ï¼ˆPowerShellï¼‰
curl http://localhost:3000/api/health
```

é¢„æœŸå“åº”ï¼š
```json
{
  "status": "healthy",
  "data_loaded": true,
  "timestamp": "2025-12-15T10:30:00.000Z"
}
```

### å‰ç«¯éƒ¨ç½²

#### 1. å®‰è£…ä¾èµ–

```powershell
cd frontend
npm install
# æˆ–
yarn install
```

#### 2. é…ç½® API åœ°å€

ç¼–è¾‘ `src/pages/index/index.vue`ï¼Œä¿®æ”¹ API åœ°å€ï¼š

```javascript
data() {
  return {
    apiBaseUrl: 'http://localhost:3000'  // åç«¯ API åœ°å€
  }
}
```

#### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```powershell
# H5 æ¨¡å¼ï¼ˆæµè§ˆå™¨ï¼‰
npm run serve
# æˆ–
yarn serve
```

è®¿é—®ï¼š`http://localhost:8080`ï¼ˆç«¯å£å¯èƒ½ä¸åŒï¼Œä»¥ç»ˆç«¯è¾“å‡ºä¸ºå‡†ï¼‰

#### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```powershell
# æ„å»º H5 ç‰ˆæœ¬
npm run build

# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# æ„å»º APP
npm run build:app-plus
```

### æ•°æ®å¤„ç†å·¥å…·

#### ç¯å¢ƒé…ç½®

```powershell
cd data
pip install -r requirements.txt
```

#### å¸¸ç”¨è„šæœ¬

```powershell
# 1. Markdown è½¦æ¬¡ä¿¡æ¯è½¬ JSON
python data_processing/md_to_json.py

# 2. ç”ŸæˆæœåŠ¡åˆ—è¡¨
python data_processing/generate_service_list.py

# 3. æ·»åŠ æ–¹å‘æ€§ä¿¡æ¯
python data_processing/add_directionality.py

# 4. ç”Ÿæˆå›¾æ•°æ®
python graph/generate_fast_graph.py

# 5. æ•°æ®éªŒè¯
python check/check_connectivity.py
python check/check_duplicates.py
```

### Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

#### ä½¿ç”¨ Docker Compose

```powershell
cd backend
docker-compose up -d
```

#### å•ç‹¬æ„å»º

```powershell
# æ„å»ºé•œåƒ
docker build -t metroplan-backend .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 -d metroplan-backend
```

---

## ä½¿ç”¨æ–‡æ¡£

### API æ¥å£

#### 1. å¥åº·æ£€æŸ¥

**è¯·æ±‚**ï¼š
```http
GET /api/health
```

**å“åº”**ï¼š
```json
{
  "status": "healthy",
  "data_loaded": true,
  "timestamp": "2025-12-15T10:30:00.000Z"
}
```

#### 2. è·¯å¾„æŸ¥è¯¢

**è¯·æ±‚**ï¼š
```http
POST /api/pathfinding/find
Content-Type: application/json

{
  "start_station": "å¹¿å·å—",
  "end_station": "æ·±åœ³åŒ—",
  "max_transfers": 2,
  "window_minutes": 90,
  "allow_same_station_consecutive_transfers": false
}
```

**å“åº”**ï¼š
```json
{
  "start_station": "å¹¿å·å—",
  "end_station": "æ·±åœ³åŒ—",
  "generated_at": "2025-12-15T10:30:00.000Z",
  "summary": {
    "raw_path_count": 15,
    "window_minutes": 90,
    "fastest_minutes": 35,
    "filtered_path_count": 8,
    "merged_path_count": 5
  },
  "paths": [
    {
      "id": 1,
      "type": "direct",
      "train_sequence": ["C7001"],
      "departure_time": "08:00",
      "arrival_time": "08:35",
      "total_time": "35åˆ†é’Ÿ",
      "total_minutes": 35,
      "is_fast": true,
      "transfer_count": 0,
      "transfer_details": []
    },
    {
      "id": 2,
      "type": "transfer",
      "train_sequence": ["C7003", "C7205"],
      "departure_time": "08:15",
      "arrival_time": "09:20",
      "total_time": "1å°æ—¶5åˆ†é’Ÿ",
      "total_minutes": 65,
      "is_fast": false,
      "transfer_count": 1,
      "transfer_details": [
        {
          "station": "è™é—¨",
          "arrive_time": "08:45",
          "depart_time": "08:55",
          "wait_minutes": 10
        }
      ]
    }
  ]
}
```

#### 3. è·å–è½¦ç«™åˆ—è¡¨

**è¯·æ±‚**ï¼š
```http
GET /api/pathfinding/stations
```

**å“åº”**ï¼š
```json
{
  "stations": [
    "å¹¿å·å—", "å¹¿å·ä¸œ", "æ·±åœ³åŒ—", "ä½›å±±è¥¿", "è‚‡åº†", 
    "ç æµ·", "ä¸œè", "æƒ å·", "ä¸­å±±", "æ±Ÿé—¨", ...
  ],
  "count": 65
}
```

### å‰ç«¯ä½¿ç”¨

#### 1. æŸ¥è¯¢è·¯å¾„

1. åœ¨**èµ·ç‚¹ç«™**è¾“å…¥æ¡†è¾“å…¥å‡ºå‘ç«™ï¼ˆå¦‚"å¹¿å·å—"ï¼‰
2. åœ¨**ç»ˆç‚¹ç«™**è¾“å…¥æ¡†è¾“å…¥ç›®çš„ç«™ï¼ˆå¦‚"æ·±åœ³åŒ—"ï¼‰
3. ç‚¹å‡»**æŸ¥è¯¢è·¯å¾„**æŒ‰é’®
4. ç­‰å¾…ç»“æœåŠ è½½

#### 2. æŸ¥çœ‹ç»“æœ

ç»“æœå¡ç‰‡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

- **è·¯å¾„ç±»å‹**ï¼šç›´è¾¾ï¼ˆç»¿è‰²ï¼‰æˆ–æ¢ä¹˜ï¼ˆé»„è‰²ï¼‰
- **æ—¶é—´æ®µ**ï¼š08:00 â†’ 08:35
- **æ€»è€—æ—¶**ï¼š35åˆ†é’Ÿï¼ˆç´«è‰²å¾½ç« ï¼‰
- **åˆ—è½¦è½¦æ¬¡**ï¼šC7001
- **å¿«é€Ÿåˆ—è½¦æ ‡è¯†**ï¼šâš¡ å¿«é€Ÿåˆ—è½¦
- **æ¢ä¹˜è¯¦æƒ…**ï¼šæ¢ä¹˜ç«™ã€ç­‰å¾…æ—¶é—´ç­‰

#### 3. æŸ¥çœ‹è½¦ç«™åˆ—è¡¨

ç‚¹å‡»**è·å–è½¦ç«™åˆ—è¡¨**æŒ‰é’®ï¼ŒæŸ¥çœ‹æ‰€æœ‰ 65 ä¸ªå¯ç”¨è½¦ç«™ã€‚

---

## å®ç°åŸç†

### æ ¸å¿ƒç®—æ³•

#### æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰

ç³»ç»Ÿä½¿ç”¨ **DFS ç®—æ³•**éå†å›¾ç»“æ„ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼š

```python
def find_all_paths(start_station, end_station, max_transfers, adjacency, nodes):
    """
    ä½¿ç”¨ DFS æŸ¥æ‰¾æ‰€æœ‰è·¯å¾„
    
    å‚æ•°ï¼š
    - start_station: èµ·ç‚¹ç«™å
    - end_station: ç»ˆç‚¹ç«™å
    - max_transfers: æœ€å¤§æ¢ä¹˜æ¬¡æ•°
    - adjacency: é‚»æ¥è¡¨
    - nodes: èŠ‚ç‚¹åˆ—è¡¨
    
    è¿”å›ï¼š
    - paths: æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è·¯å¾„åˆ—è¡¨
    """
    # 1. åˆå§‹åŒ–æœç´¢çŠ¶æ€
    # 2. æ·±åº¦ä¼˜å…ˆéå†
    # 3. æ¢ä¹˜æ¬¡æ•°å‰ªæ
    # 4. æ–¹å‘æ€§éªŒè¯
    # 5. è®°å½•å®Œæ•´è·¯å¾„
```

**ç®—æ³•ç‰¹ç‚¹**ï¼š

1. **æ¢ä¹˜æ¬¡æ•°æ§åˆ¶**ï¼šé€šè¿‡ `max_transfers` å‚æ•°é™åˆ¶æ¢ä¹˜æ¬¡æ•°ï¼ˆ0-2 æ¬¡ï¼‰
2. **æ–¹å‘æ€§éªŒè¯**ï¼šç¡®ä¿æ¢ä¹˜çš„åˆ—è½¦æ–¹å‘ä¸€è‡´ï¼ˆä½¿ç”¨æ–¹å‘å‘é‡è®¡ç®—ï¼‰
3. **æ—¶é—´è®¡ç®—**ï¼šæ ¹æ®åˆ—è½¦æ—¶åˆ»è¡¨ç²¾ç¡®è®¡ç®—å‡ºå‘/åˆ°è¾¾æ—¶é—´
4. **è·¯å¾„å‰ªæ**ï¼šé¿å…æ— æ•ˆè·¯å¾„ï¼Œæé«˜æœç´¢æ•ˆç‡

#### è·¯å¾„åˆå¹¶ç®—æ³•

```python
def merge_paths_by_train_sequence(paths):
    """
    åˆå¹¶è½¦æ¬¡åºåˆ—ç›¸åŒçš„è·¯å¾„
    
    ç›¸åŒè½¦æ¬¡åºåˆ—çš„è·¯å¾„å¯èƒ½åœ¨ä¸åŒç«™æ¢ä¹˜ï¼Œ
    ç³»ç»Ÿä¼šè‡ªåŠ¨åˆå¹¶å¹¶åˆ—å‡ºæ‰€æœ‰å¯é€‰æ¢ä¹˜ç«™ã€‚
    """
    # 1. æŒ‰è½¦æ¬¡åºåˆ—åˆ†ç»„
    # 2. ä¿ç•™æœ€å¿«è·¯å¾„çš„åŸºæœ¬ä¿¡æ¯
    # 3. æ”¶é›†æ‰€æœ‰æ¢ä¹˜é€‰é¡¹
    # 4. è¿”å›åˆå¹¶åçš„è·¯å¾„
```

**åˆå¹¶ç­–ç•¥**ï¼š

- è½¦æ¬¡åºåˆ—å®Œå…¨ç›¸åŒçš„è·¯å¾„ä¼šè¢«åˆå¹¶
- ä¿ç•™æœ€å¿«è·¯å¾„çš„æ—¶é—´ä¿¡æ¯
- `transfer_options` å­—æ®µåˆ—å‡ºæ‰€æœ‰å¯é€‰æ¢ä¹˜ç«™

### æ•°æ®ç»“æ„

#### å›¾ç»“æ„ï¼ˆfast_graph.jsonï¼‰

```json
{
  "nodes": [
    ["C7001", "å¹¿å·å—", "08:00"],
    ["C7001", "è™é—¨", "08:30"],
    ["C7001", "æ·±åœ³åŒ—", "08:50"]
  ],
  "edges": [
    {
      "from": ["C7001", "å¹¿å·å—", "08:00"],
      "to": ["C7001", "è™é—¨", "08:30"],
      "type": "travel",
      "weight": 30
    },
    {
      "from": ["C7001", "è™é—¨", "08:30"],
      "to": ["C7205", "è™é—¨", "08:40"],
      "type": "transfer",
      "weight": 10
    }
  ]
}
```

**èŠ‚ç‚¹æ ¼å¼**ï¼š`[è½¦æ¬¡ID, ç«™å, æ—¶é—´]`
**è¾¹ç±»å‹**ï¼š
- `travel`ï¼šè¡Œè½¦è¾¹ï¼ˆåŒä¸€åˆ—è½¦çš„ç«™ç‚¹é—´ç§»åŠ¨ï¼‰
- `transfer`ï¼šæ¢ä¹˜è¾¹ï¼ˆä¸åŒåˆ—è½¦é—´çš„æ¢ä¹˜ï¼‰

#### æ—¶åˆ»è¡¨ç»“æ„ï¼ˆschedule_with_directionality.jsonï¼‰

```json
{
  "train": [
    {
      "id": "C7001",
      "is_fast": true,
      "directionality": [1, 0],
      "schedule": [
        {
          "station": "å¹¿å·å—",
          "arrive_time": null,
          "depart_time": "08:00",
          "travel_time": 0
        },
        {
          "station": "æ·±åœ³åŒ—",
          "arrive_time": "08:35",
          "depart_time": null,
          "travel_time": 35
        }
      ]
    }
  ]
}
```

**å…³é”®å­—æ®µ**ï¼š
- `is_fast`ï¼šæ˜¯å¦ä¸ºå¿«é€Ÿåˆ—è½¦
- `directionality`ï¼šæ–¹å‘å‘é‡ï¼ˆç”¨äºæ¢ä¹˜éªŒè¯ï¼‰
- `schedule`ï¼šç«™ç‚¹æ—¶åˆ»è¡¨

### è·¯å¾„ä¼˜åŒ–

#### 1. æ—¶é—´çª—å£è¿‡æ»¤

```javascript
// åŸºäºæœ€å¿«è·¯å¾„è®¾å®šæ—¶é—´çª—å£
const fastestTime = Math.min(...paths.map(p => p.total_minutes));
const timeWindow = config.algorithm.timeWindowMinutes; // é»˜è®¤ 90 åˆ†é’Ÿ

// è¿‡æ»¤è¶…æ—¶è·¯å¾„
const filteredPaths = paths.filter(p => 
  p.total_minutes <= fastestTime + timeWindow
);
```

#### 2. æ™ºèƒ½æ’åº

è·¯å¾„æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ’åºï¼š

1. **æ¢ä¹˜æ¬¡æ•°**ï¼šæ¢ä¹˜æ¬¡æ•°å°‘çš„ä¼˜å…ˆ
2. **æ€»è€—æ—¶**ï¼šè€—æ—¶çŸ­çš„ä¼˜å…ˆ
3. **å¿«é€Ÿåˆ—è½¦**ï¼šåŒ…å«å¿«é€Ÿåˆ—è½¦çš„ä¼˜å…ˆ

```javascript
paths.sort((a, b) => {
  if (a.transfer_count !== b.transfer_count) {
    return a.transfer_count - b.transfer_count; // æ¢ä¹˜æ¬¡æ•°
  }
  if (a.total_minutes !== b.total_minutes) {
    return a.total_minutes - b.total_minutes;   // æ€»è€—æ—¶
  }
  return (b.is_fast ? 1 : 0) - (a.is_fast ? 1 : 0); // å¿«é€Ÿåˆ—è½¦
});
```

#### 3. æ–¹å‘æ€§éªŒè¯

```python
def verify_directionality(train1_id, train2_id, directionality_map):
    """
    éªŒè¯ä¸¤ä¸ªåˆ—è½¦çš„æ–¹å‘æ˜¯å¦ä¸€è‡´
    
    ä½¿ç”¨æ–¹å‘å‘é‡çš„ç‚¹ç§¯åˆ¤æ–­ï¼š
    - ç‚¹ç§¯ > 0ï¼šæ–¹å‘ä¸€è‡´
    - ç‚¹ç§¯ <= 0ï¼šæ–¹å‘ç›¸åæˆ–å‚ç›´
    """
    v1 = directionality_map.get(train1_id)
    v2 = directionality_map.get(train2_id)
    
    if v1 and v2:
        dot_product = sum(a * b for a, b in zip(v1, v2))
        return dot_product > 0
    
    return True  # æ— æ–¹å‘ä¿¡æ¯æ—¶é»˜è®¤å…è®¸
```

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡è¯¦è§£

ç³»ç»Ÿé€šè¿‡ä¸‰ä¸ªæ–‡ä»¶ç®¡ç†é…ç½®ï¼š

| æ–‡ä»¶ | ä½œç”¨ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `config/config.js` | é»˜è®¤é…ç½®å’ŒéªŒè¯é€»è¾‘ | æœ€ä½ |
| `.env` | æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤åˆ°ç‰ˆæœ¬åº“ï¼‰ | ä¸­ç­‰ |
| ç³»ç»Ÿç¯å¢ƒå˜é‡ | æ“ä½œç³»ç»Ÿæˆ–å®¹å™¨ç¯å¢ƒå˜é‡ | **æœ€é«˜** |

#### é…ç½®ä¼˜å…ˆçº§è§„åˆ™

```
ç³»ç»Ÿç¯å¢ƒå˜é‡ > .env æ–‡ä»¶ > config.js é»˜è®¤å€¼
```

**ç¤ºä¾‹**ï¼š

```env
# .env æ–‡ä»¶ä¸­è®¾ç½®
PORT=3000

# ç³»ç»Ÿç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆä¼šè¦†ç›– .envï¼‰
$env:PORT=4000

# æœ€ç»ˆä½¿ç”¨ï¼š4000
```

### é…ç½®å‚æ•°è¯´æ˜

#### æœåŠ¡å™¨é…ç½®

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `NODE_ENV` | `development` | è¿è¡Œç¯å¢ƒï¼š`development` \| `production` |
| `PORT` | `3000` | æœåŠ¡å™¨ç›‘å¬ç«¯å£ |

#### æ•°æ®æ–‡ä»¶è·¯å¾„

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `GRAPH_FILE_PATH` | `./fast_graph.json` | å›¾æ•°æ®æ–‡ä»¶è·¯å¾„ |
| `SCHEDULE_FILE_PATH` | `./schedule_with_directionality.json` | æ—¶åˆ»è¡¨æ–‡ä»¶è·¯å¾„ |
| `RESULTS_DIR` | `./results` | ç»“æœè¾“å‡ºç›®å½• |

#### ç®—æ³•å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | èŒƒå›´ | è¯´æ˜ |
|------|--------|------|------|
| `MAX_TRANSFERS` | `2` | 0-2 | æœ€å¤§å…è®¸æ¢ä¹˜æ¬¡æ•° |
| `TIME_WINDOW_MINUTES` | `90` | 0-240 | æ—¶é—´çª—å£è¿‡æ»¤ï¼ˆåˆ†é’Ÿï¼‰ |
| `ALLOW_SAME_STATION_TRANSFERS` | `false` | `true` \| `false` | æ˜¯å¦å…è®¸åŒç«™è¿ç»­æ¢ä¹˜ |

#### é…ç½®éªŒè¯

`config.js` ä¼šåœ¨å¯åŠ¨æ—¶éªŒè¯é…ç½®ï¼š

```javascript
function validateConfig(config) {
  // 1. æ£€æŸ¥ç«¯å£å·èŒƒå›´ï¼ˆ1-65535ï¼‰
  // 2. æ£€æŸ¥æ¢ä¹˜æ¬¡æ•°èŒƒå›´ï¼ˆ0-2ï¼‰
  // 3. æ£€æŸ¥æ—¶é—´çª—å£èŒƒå›´ï¼ˆ0-240ï¼‰
  // 4. æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
  // 5. æ£€æŸ¥å¸ƒå°”å€¼ç±»å‹
  
  // å¦‚æœéªŒè¯å¤±è´¥ï¼Œä¼šæ‰“å°é”™è¯¯å¹¶é€€å‡ºè¿›ç¨‹
}
```

---

## å¼€å‘æŒ‡å—

### è¿è¡Œæµ‹è¯•

#### åç«¯æµ‹è¯•

```powershell
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- pathfinding.test.js

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm test -- --coverage
```

æµ‹è¯•æ–‡ä»¶ä½ç½®ï¼š
- `test/api.test.js`ï¼šAPI æ¥å£æµ‹è¯•
- `test/pathfinding.test.js`ï¼šè·¯å¾„æŸ¥æ‰¾é€»è¾‘æµ‹è¯•
- `test/dataService.test.js`ï¼šæ•°æ®æœåŠ¡æµ‹è¯•
- `test/timeUtils.test.js`ï¼šæ—¶é—´å·¥å…·æµ‹è¯•

#### Python æµ‹è¯•

```powershell
cd data

# è¿è¡Œæµ‹è¯•
python -m pytest test/

# å¿«é€Ÿæµ‹è¯•
python test/test_quick.py
```

### æ·»åŠ æ–°è½¦ç«™

1. **æ›´æ–°è½¦æ¬¡ Markdown æ–‡ä»¶**ï¼š
   ```markdown
   # è½¦æ¬¡ä¿¡æ¯/æ–°çº¿è·¯.md
   | è½¦æ¬¡ | èµ·ç‚¹ | ç»ˆç‚¹ | ... |
   ```

2. **è¿è¡Œæ•°æ®å¤„ç†è„šæœ¬**ï¼š
   ```powershell
   cd data
   python data_processing/md_to_json.py
   python data_processing/generate_service_list.py
   python graph/generate_fast_graph.py
   ```

3. **éªŒè¯æ•°æ®**ï¼š
   ```powershell
   python check/check_connectivity.py
   ```

4. **é‡å¯æœåŠ¡å™¨**ï¼š
   ```powershell
   cd backend
   npm restart
   ```

### è°ƒæ•´ç®—æ³•å‚æ•°

ä¿®æ”¹ `.env` æ–‡ä»¶ï¼š

```env
# å¢åŠ æœ€å¤§æ¢ä¹˜æ¬¡æ•°ï¼ˆéœ€ä¿®æ”¹ä»£ç é™åˆ¶ï¼‰
MAX_TRANSFERS=3

# æ‰©å¤§æ—¶é—´çª—å£
TIME_WINDOW_MINUTES=120

# å…è®¸åŒç«™æ¢ä¹˜
ALLOW_SAME_STATION_TRANSFERS=true
```

### è‡ªå®šä¹‰è·¯ç”±

åœ¨ `backend/routes/` ä¸‹åˆ›å»ºæ–°è·¯ç”±ï¼š

```javascript
// routes/custom.js
const express = require('express');
const router = express.Router();

router.get('/my-endpoint', (req, res) => {
  res.json({ message: 'Hello from custom route!' });
});

module.exports = router;
```

åœ¨ `app.js` ä¸­æ³¨å†Œï¼š

```javascript
const customRoutes = require('./routes/custom');
app.use('/api/custom', customRoutes);
```

---

## é¡¹ç›®ç»“æ„

### åç«¯æ¨¡å—è¯´æ˜

```
backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.js              # é…ç½®ç®¡ç†å’ŒéªŒè¯
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ errorHandler.js        # å…¨å±€é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ validation.js          # è¯·æ±‚éªŒè¯å’Œé™æµ
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ pathfinding.js         # è·¯å¾„æŸ¥æ‰¾ API è·¯ç”±
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ dataService.js         # æ•°æ®åŠ è½½å’Œç¼“å­˜
â”‚   â””â”€â”€ pathfindingService.js  # è·¯å¾„æŸ¥æ‰¾ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ timeUtils.js           # æ—¶é—´å¤„ç†å·¥å…·å‡½æ•°
â””â”€â”€ test/                      # å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
```

### å‰ç«¯ç»„ä»¶è¯´æ˜

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ index/
â”‚       â””â”€â”€ index.vue          # é¦–é¡µï¼ˆæŸ¥è¯¢ç•Œé¢ï¼‰
â”œâ”€â”€ static/
â”‚   â””â”€â”€ data/                  # é™æ€æ•°æ®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ App.vue                    # æ ¹ç»„ä»¶
â””â”€â”€ main.js                    # åº”ç”¨å…¥å£
```

### æ•°æ®å¤„ç†å·¥å…·

```
data/
â”œâ”€â”€ DFS_PathFinding/
â”‚   â””â”€â”€ find_paths_dfs.py      # DFS æ ¸å¿ƒç®—æ³•
â”œâ”€â”€ data_processing/
â”‚   â”œâ”€â”€ md_to_json.py          # Markdown è½¬ JSON
â”‚   â”œâ”€â”€ generate_service_list.py    # ç”ŸæˆæœåŠ¡åˆ—è¡¨
â”‚   â””â”€â”€ add_directionality.py       # æ·»åŠ æ–¹å‘æ€§
â”œâ”€â”€ graph/
â”‚   â””â”€â”€ generate_fast_graph.py      # ç”Ÿæˆå›¾æ•°æ®
â””â”€â”€ check/                           # æ•°æ®éªŒè¯è„šæœ¬
```

---

## å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤º `Error: listen EADDRINUSE: address already in use :::3000`

**è§£å†³**ï¼š

```powershell
# æ–¹æ³• 1ï¼šä¿®æ”¹ç«¯å£
# ç¼–è¾‘ .env æ–‡ä»¶
PORT=3001

# æ–¹æ³• 2ï¼šæ€æ­»å ç”¨è¿›ç¨‹ï¼ˆWindowsï¼‰
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

### 2. æ•°æ®æ–‡ä»¶æœªæ‰¾åˆ°

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤º `ENOENT: no such file or directory`

**è§£å†³**ï¼š

```powershell
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls fast_graph.json
ls schedule_with_directionality.json

# å¦‚æœä¸å­˜åœ¨ï¼Œè¿è¡Œæ•°æ®å¤„ç†è„šæœ¬
cd ../data
python graph/generate_fast_graph.py
python data_processing/generate_service_list.py
```

### 3. è·¨åŸŸé”™è¯¯

**é—®é¢˜**ï¼šå‰ç«¯è°ƒç”¨ API æ—¶æç¤º `CORS error`

**è§£å†³**ï¼š

æ£€æŸ¥ `backend/config/config.js` ä¸­çš„ CORS é…ç½®ï¼š

```javascript
// å¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰æ¥æº
if (config.server.nodeEnv === 'development') {
  corsOrigins.push('*');
}

// ç”Ÿäº§ç¯å¢ƒéœ€æ˜ç¡®æŒ‡å®š
// corsOrigins.push('https://your-frontend-domain.com');
```

### 4. æŸ¥è¯¢æ— ç»“æœ

**é—®é¢˜**ï¼šæŸ¥è¯¢è¿”å›ç©ºæ•°ç»„ `paths: []`

**å¯èƒ½åŸå› **ï¼š

1. **ç«™åé”™è¯¯**ï¼šæ£€æŸ¥ç«™åæ˜¯å¦åœ¨è½¦ç«™åˆ—è¡¨ä¸­
2. **æ— å¯è¾¾è·¯å¾„**ï¼šä¸¤ç«™ä¹‹é—´å¯èƒ½æ— è¿æ¥
3. **æ¢ä¹˜æ¬¡æ•°ä¸è¶³**ï¼šå°è¯•å¢åŠ  `max_transfers`

**è°ƒè¯•**ï¼š

```powershell
# æŸ¥çœ‹æ‰€æœ‰è½¦ç«™
curl http://localhost:3000/api/pathfinding/stations

# ä½¿ç”¨å·²çŸ¥å¯è¾¾çš„ç«™ç‚¹æµ‹è¯•
curl -X POST http://localhost:3000/api/pathfinding/find \
  -H "Content-Type: application/json" \
  -d '{"start_station":"å¹¿å·å—","end_station":"æ·±åœ³åŒ—","max_transfers":2}'
```

### 5. Python æ¨¡å—å¯¼å…¥é”™è¯¯

**é—®é¢˜**ï¼šè¿è¡Œ Python è„šæœ¬æ—¶æç¤º `ModuleNotFoundError`

**è§£å†³**ï¼š

```powershell
cd data
pip install -r requirements.txt
```

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. **æŠ¥å‘Š Bug**ï¼šåœ¨ [Issues](https://github.com/Fo-mal-Haut/MetroPlan/issues) ä¸­æäº¤é—®é¢˜
2. **å»ºè®®åŠŸèƒ½**ï¼šåœ¨ Issues ä¸­æå‡ºæ–°åŠŸèƒ½å»ºè®®
3. **æäº¤ä»£ç **ï¼šFork é¡¹ç›®å¹¶æäº¤ Pull Request
4. **å®Œå–„æ–‡æ¡£**ï¼šæ”¹è¿›æ–‡æ¡£å’Œç¤ºä¾‹

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
3. æäº¤ä¿®æ”¹ï¼š`git commit -m "Add new feature"`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/new-feature`
5. æäº¤ Pull Request

### ä»£ç è§„èŒƒ

- **JavaScript**ï¼šéµå¾ª ESLint é…ç½®
- **Python**ï¼šéµå¾ª PEP 8 è§„èŒƒ
- **Vue**ï¼šéµå¾ª Vue å®˜æ–¹é£æ ¼æŒ‡å—
- **æäº¤ä¿¡æ¯**ï¼šä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯ï¼ˆå¦‚ `fix: ä¿®å¤è·¯å¾„æŸ¥è¯¢bug`ï¼‰

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œå·¥å…·ï¼š

- [Express.js](https://expressjs.com/) - Web åº”ç”¨æ¡†æ¶
- [uni-app](https://uniapp.dcloud.io/) - è·¨å¹³å°å¼€å‘æ¡†æ¶
- [uView UI](https://www.uviewui.com/) - UI ç»„ä»¶åº“
- [Flask](https://flask.palletsprojects.com/) - Python Web æ¡†æ¶

---

## è”ç³»æ–¹å¼

- **ä½œè€…**ï¼šFo-mal-Haut
- **GitHub**ï¼š[https://github.com/Fo-mal-Haut/MetroPlan](https://github.com/Fo-mal-Haut/MetroPlan)
- **é—®é¢˜åé¦ˆ**ï¼š[Issues](https://github.com/Fo-mal-Haut/MetroPlan/issues)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by Fo-mal-Haut

</div>
